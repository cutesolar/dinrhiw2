# GNU Makefile
##################################################

CC = @CC@
CXX = @CXX@

SOURCES = tst/test.cpp tst/csvoptimizer.cpp HugeLinear.cpp CSVToBinaryFile.cpp OneHotEncoder.cpp \
	LBFGS_hugelinear.cpp \
	../math/fastpca.cpp ../math/vertex.cpp ../math/matrix.cpp ../dataset.cpp \
	../math/modular.cpp ../math/superresolution.cpp ../math/quaternion.cpp \
	FP-growth/src/fptree.cpp

OBJECTS= HugeLinear.o CSVToBinaryFile.o OneHotEncoder.o LBFGS_hugelinear.o \
	FP-growth/src/fptree.o

EXTRA_OBJECTS = ../math/vertex.o ../math/matrix.o ../math/ownexception.o ../math/integer.o \
	../math/matrix_rotations.o ../math/eig.o ../math/correlation.o ../math/blade_math.o \
	../math/real.o 	../dataset.o ../conffile.o ../linear_ETA.o \
	../dynamic_bitset.o ../math/ica.o ../math/BFGS.o ../math/LBFGS.o ../math/linear_algebra.o \
	../math/correlation.o ../math/ica.o ../math/linear_equations.o ../math/norms.o ../math/RNG.o \
	../math/modular.o ../math/superresolution.o \
	../math/outerproduct.o ../math/fastpca.o ../Log.o ../VisualizationInterface.o \
	../math/quaternion.o 

TARGET1_OBJECTS=tst/test.o 
TARGET1=testsuite1

TARGET2_OBJECTS=tst/csvoptimizer.o
TARGET2=csvoptimizer

TARGET3_OBJECTS=tst/enrichdata.o
TARGET3=enrichdata

OPTIMIZE=@optimization_flags@
CFLAGS=@CFLAGS@ -Wno-deprecated -Wno-strict-aliasing -Wno-attributes -Wno-class-memaccess @EXTRA_INCLUDEPATHS@

CXXFLAGS=-Wall $(CFLAGS) @CXXFLAGS@ -g -I. -I.. -I../.. -I../math -I../neuralnetwork -IFP-growth/include $(OPTIMIZE)

LIBS= @EXTRA_LIBPATHS@ -lgmp -lpthread @EXTRA_LIBS@

##################################################

all: test1 test2 test3

test1: $(TARGET1_OBJECTS) $(OBJECTS) $(EXTRA_OBJECTS)
	$(CXX) $(CXXFLAGS) -o $(TARGET1) $(TARGET1_OBJECTS) $(OBJECTS) $(EXTRA_OBJECTS) $(LIBS)

test2: $(TARGET2_OBJECTS) $(OBJECTS) $(EXTRA_OBJECTS)
	$(CXX) $(CXXFLAGS) -o $(TARGET2) $(TARGET2_OBJECTS) $(OBJECTS) $(EXTRA_OBJECTS) $(LIBS)

test3: $(TARGET3_OBJECTS) $(OBJECTS) $(EXTRA_OBJECTS)
	$(CXX) $(CXXFLAGS) -o $(TARGET3) $(TARGET3_OBJECTS) $(OBJECTS) $(EXTRA_OBJECTS) $(LIBS)

clean:
	$(RM) $(OBJECTS)
	$(RM) $(TARGET1_OBJECTS)
	$(RM) $(TARGET1)
	$(RM) $(TARGET2_OBJECTS)
	$(RM) $(TARGET2)
	$(RM) *~

realclean: clean
	$(RM) *.o *.rpo
	$(RM) tst/*.o tst/*.rpo

depend:
	$(CXX) $(CXXFLAGS) -MM $(SOURCES) > Makefile.depend

##################################################
# must have initially empty dependencies file

include Makefile.depend




